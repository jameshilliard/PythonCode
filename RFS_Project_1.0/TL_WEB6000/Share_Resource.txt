*** Settings ***
Library           SSHLibrary
Library           OperatingSystem
Library           ../../robotframework/RFS_Project_1.0/library/TR/TR.py

*** Keywords ***
SPV
    [Arguments]    @{SPV_arg}
    ${Check_SPV}    DoSPV    @{SPV_arg}
    Should Be True    ${Check_SPV}

GPV
    [Arguments]    @{GPV_arg}
    ${Check_GPV}    DoGPV    @{GPV_arg}
    Should Be True    ${Check_GPV}

Check_SSH_Disabled
    DoSPV    Device.X_ACTIONTEC_COM_RemoteLogin.Enable=0 boolean
    ${Init_GPV}=    DoGPV    Device.X_ACTIONTEC_COM_RemoteLogin.Enable=0
    Should Be True    ${Init_GPV}

SSH_DUT
    [Arguments]    ${ssh_address}    ${username}    ${password}
    SSHLibrary.Open Connection    ${ssh_address}
    SSHLibrary.Login    ${username}    ${password}
    SSHLibrary.Close Connection

PingTest
    [Arguments]    ${destIP}    ${count}    ${interface}
    [Documentation]    Use AT Pingtest tool, and return value should not contain failed, otherwise this keyword will fail
    ...
    ...    Arguments: ${destIP} | ${count} | ${interface}
    ...
    ...    Usage:
    ...    PingTest | 192.168.1.254 | 4 | eth2
    ...
    ...    Arguments can be a real value or variable defined in Variables list.
    Set Environment Variable    G_CURRENTLOG    /tmp/
    ${PingResult}=    Run    Pingtest.sh -d ${destIP} -c ${count} -i ${interface}
    Should Not Contain    ${PingResult}    failed

GetIP
    [Arguments]    ${interface}
    [Documentation]    Use dhclient get IP address on identify interface, and return value should contain 'renewal', otherwise the keyword will not pass.
    ...
    ...    Example:
    ...
    ...    GetIP | ${U_CUSTOM_IF1}
    Run    dhclient -r ${interface}
    ${GetIP_Result}    Run    dhclient -v ${interface}
    Should contain    ${GetIP_Result}    renewal

Release_IP
    [Arguments]    ${interface}
    [Documentation]    Release the IP by dhclient
    ...
    ...    Arguments: ${interface}
    ...
    ...    Example:
    ...    Release_IP | ${U_CUSTOM_IF1}
    Run    dhclient -r ${interface}
