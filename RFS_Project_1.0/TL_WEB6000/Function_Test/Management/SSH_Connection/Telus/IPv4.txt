*** Settings ***
Suite Setup       Setup_env_variable
Library           SSHLibrary
Library           OperatingSystem
Library           ../../../../../../WCB3000/Wireless/TR.py

*** Variables ***
${U_CUSTOM_DUT_BR0}    192.168.1.64
${U_CUSTOM_SSH_USER}    admin
${U_CUSTOM_SSH_PASSWORD}    1

*** Test Cases ***
02301376_Enable SSH via TR069
    Comment    Enable SSH
    DoSPV    Device.X_ACTIONTEC_COM_RemoteLogin.Enable =1 boolean    Device.X_ACTIONTEC_COM_RemoteLogin.Port=22 unsignedInt    Device.X_ACTIONTEC_COM_RemoteLogin.Protocol=SSH string    Device.X_ACTIONTEC_COM_RemoteLogin.IdleTimeout=60 unsignedInt    Device.X_ACTIONTEC_COM_RemoteLogin.Username=admin string    Device.X_ACTIONTEC_COM_RemoteLogin.Password=1 string
    Comment    Verify SPV Result
    ${Check_GPV}    DoGPV    Device.X_ACTIONTEC_COM_RemoteLogin.Enable =1    Device.X_ACTIONTEC_COM_RemoteLogin.Port =22    Device.X_ACTIONTEC_COM_RemoteLogin.Protocol=SSH    Device.X_ACTIONTEC_COM_RemoteLogin.IdleTimeout=60
    Should Be True    ${Check_GPV}
    Comment    Verify SSH
    SSHLibrary.Open Connection    ${U_CUSTOM_DUT_BR0}
    SSHLibrary.Login    ${U_CUSTOM_SSH_USER}    ${U_CUSTOM_SSH_PASSWORD}
    SSHLibrary.Close Connection
    [Teardown]    Check_SSH_Disabled

*** Keywords ***
Setup_Env_variable
    Set Environment Variable    wan_mgm_ip    192.168.8.51
    Set Environment Variable    ACS_ConnectionRequestURL    http://192.168.1.64:7547/

Check_SSH_Disabled
    DoSPV    Device.X_ACTIONTEC_COM_RemoteLogin.Enable=0 boolean
    ${Init_GPV}=    DoGPV    Device.X_ACTIONTEC_COM_RemoteLogin.Enable=0
    Should Be True    ${Init_GPV}
