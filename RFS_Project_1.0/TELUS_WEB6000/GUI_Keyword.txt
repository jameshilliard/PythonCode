*** Settings ***
Library           Selenium2Library
Library           String

*** Keywords ***
GUI_LoginDUT
    [Arguments]    ${USR}    ${PASSWORD}
    ${Title}=    Get Title
    Should Be Equal As Strings    ${Title}    Login
    Input Text    login_username    ${USR}
    Input Text    login_password    ${PASSWORD}
    Click Element    login_btn
    Sleep    2
    Page Should Contain Element    userToolbar

GUI_Check WiFi Radio_2G
    [Arguments]    ${U_DUT_BR0_IP}    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}    ${casetype}=on
    Open Browser    http://${U_DUT_BR0_IP}
    Sleep    2
    GUI_LoginDUT    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}
    ${Status_2G}=    Get Text    //*[@id="id2_apenb"]
    Run Keyword If    '${casetype}' == 'on'    Should Be Equal As Strings    ${Status_2G}    Enabled    ELSE IF    '${casetype}' == 'off'
    ...    Should Be Equal As Strings    ${Status_2G}    Disabled
    GUI_LogoutDUT    ${U_DUT_BR0_IP}
    Close Browser
    [Teardown]    Close Browser

GUI_Check WiFi Radio_5G
    [Arguments]    ${U_DUT_BR0_IP}    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}    ${casetype}=on
    Open Browser    ${U_DUT_BR0_IP}
    Sleep    2
    GUI_LoginDUT    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}
    ${Status_5G}=    Get Text    xpath=//*[@id="id5_apenb"]
    Run Keyword If    '${casetype}' == 'on'    Should Be Equal As Strings    ${Status_5G}    Enabled    ELSE IF    '${casetype}' == 'off'
    ...    Should Be Equal As Strings    ${Status_5G}    Disabled
    GUI_LogoutDUT    ${U_DUT_BR0_IP}
    Close Browser
    [Teardown]    Close Browser

GUI_LogoutDUT
    [Arguments]    ${U_DUT_BR0_IP}
    Go To    http://${U_DUT_BR0_IP}/wcb_main.html
    Page Should Contain Element    userToolbar
    Click Element    top_logout_span
    Confirm Action
    Sleep    2
    ${Title}=    Get Title
    Should Be Equal As Strings    ${Title}    Login

GUI_Check_Channel_2G
    [Arguments]    ${U_DUT_BR0_IP}    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}    ${AutoChannel}=True
    Open Browser    http://${U_DUT_BR0_IP}
    sleep    2
    GUI_LoginDUT    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}
    ${Channel_display}=    Get Text    //*[@id="id2_apchannel"]
    ${GUI_Channel}=    Run Keyword If    '${AutoChannel}'=='True'    Get Substring    ${Channel_display}    5    ELSE IF
    ...    '${AutoChannel}'=='False'    Get Substring    ${Channel_display}    0
    GUI_LogoutDUT    ${U_DUT_BR0_IP}
    Close Browser
    [Teardown]    Close Browser
    [Return]    ${GUI_Channel}

GUI_Check_Channel_5G
    [Arguments]    ${U_DUT_BR0_IP}    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}    ${AutoChannel}=True
    Open Browser    http://${U_DUT_BR0_IP}
    sleep    2
    GUI_LoginDUT    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}
    ${Channel_display}=    Get Text    //*[@id="id5_apchannel"]
    ${GUI_Channel}=    Run Keyword If    '${AutoChannel}'=='True'    Get Substring    ${Channel_display}    5    ELSE IF
    ...    '${AutoChannel}'=='False'    Get Substring    ${Channel_display}    0
    GUI_LogoutDUT    ${U_DUT_BR0_IP}
    Close Browser
    [Teardown]    Close Browser
    [Return]    ${GUI_Channel}

GUI_Check_WMM_2G
    [Arguments]    ${U_DUT_BR0_IP}    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}    ${Enable}=on
    Open Browser    http://${U_DUT_BR0_IP}
    sleep    2
    GUI_LoginDUT    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}
    Go To    http://${U_DUT_BR0_IP}/wl_security.html
    Sleep    2
    Click Element    id_freq2
    Run Keyword If    '${Enable}'=='on'    Radio Button Should Be Set To    wl_wmm    1    ELSE IF    '${Enable}'=='off'
    ...    Radio Button Should Be Set To    wl_wmm    0
    GUI_LogoutDUT    ${U_DUT_BR0_IP}
    Close Browser
    [Teardown]    Close Browser
    [Return]    ${GUI_Channel}

GUI_Check_WMM_5G
    [Arguments]    ${U_DUT_BR0_IP}    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}    ${Enable}=on
    Open Browser    http://${U_DUT_BR0_IP}
    sleep    2
    GUI_LoginDUT    ${U_DUT_HTTP_USER}    ${U_DUT_HTTP_PWD}
    Go To    http://${U_DUT_BR0_IP}/wl_security.html
    Sleep    2
    Click Element    id_freq5
    Run Keyword If    '${Enable}'=='on'    Radio Button Should Be Set To    wl_wmm    1    ELSE IF    '${Enable}'=='off'
    ...    Radio Button Should Be Set To    wl_wmm    0
    GUI_LogoutDUT    ${U_DUT_BR0_IP}
    Close Browser
    [Teardown]    Close Browser
    [Return]    ${GUI_Channel}

GUI_Login_UPGW
    ${Title}=    Get Title
    Should Be Equal As Strings    ${Title}    Home
    Input Text    admin_user_name    %{U_DUT_HTTP_USER_UP_GW}
    Input Text    admin_password    %{U_DUT_HTTP_PWD_UP_GW}
    Click Element    css=a.button1 > span
    Comment    Sleep    2
    Comment    Page Should Contain Element    /html/body/div/div[3]/div[2]/div[3]/div[2]/a/span

GUI_Set_UPGW_802.11bgn_mode_to_bgn
    Open Browser    http://%{U_DUT_BR0_IP_UP_GW}
    Sleep    2
    GUI_LoginUPGW
    sleep     2
    Go To     http://%{U_DUT_BR0_IP_UP_GW}/wirelesssetup_advanced.html
    sleep     2
    Select From List By Index    id_80211bg_mode    0
    sleep    1
    click Element    css=p > a.button1 > span
    sleep    15
    ${Title}=    Get Title
    Should Be Equal As Strings    ${Title}    Wireless Setup - Advanced Settings
    GUI_Logout_UPGW
    Close Browser

GUI_Logout_UPGW
    Go To     http://%{U_DUT_BR0_IP_UP_GW}/index.html
    sleep     2
    click Element    css=#login_info > a.button1 > span
    sleep     1
