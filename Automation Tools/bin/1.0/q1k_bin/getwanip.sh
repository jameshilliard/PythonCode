#! /bin/sh
##############################################################
# This script is to acquire wan ip on Q1000 
# The variable filename is supposed to be the one generated by
# parse_rawhtml.pl
#
#
#  Created by Hugo 11-27-2009
#
#############################################################

while [ $# -gt 0 ]
do
  case "$1" in
    -f)
       fileName=$2
       shift
       shift
       ;;
    *)
       echo "Usage: getwanip.sh [-f <filename>]"
  esac
done

inforaw=`cat $fileName | grep mod_ip | awk -F\> '{ print $5}'`
inforaw=`echo ${inforaw%]*}`

echo $inforaw > $G_CURRENTLOG/wanip.log
echo "WAN IP grep from html source is $inforaw"
